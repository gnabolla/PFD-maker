import { Router } from 'express';\nimport multer from 'multer';\nimport { ImportController } from '@/controllers/importController';\n\nconst router = Router();\n\n// Configure multer for file uploads\nconst upload = multer({\n  dest: process.env.UPLOAD_PATH || './uploads',\n  limits: {\n    fileSize: 10 * 1024 * 1024 // 10MB\n  },\n  fileFilter: (req, file, cb) => {\n    // Accept Excel, Word, and PDF files\n    const allowedTypes = [\n      'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\n      'application/vnd.openxmlformats-officedocument.wordprocessingml.document',\n      'application/pdf'\n    ];\n    \n    if (allowedTypes.includes(file.mimetype)) {\n      cb(null, true);\n    } else {\n      cb(new Error('Invalid file type. Only Excel, Word, and PDF files are allowed.'));\n    }\n  }\n});\n\n/**\n * @swagger\n * /import/pds:\n *   post:\n *     summary: Import PDS file and extract data\n *     tags: [Import]\n *     requestBody:\n *       required: true\n *       content:\n *         multipart/form-data:\n *           schema:\n *             type: object\n *             properties:\n *               file:\n *                 type: string\n *                 format: binary\n *                 description: PDS file in Excel (.xlsx), Word (.docx), or PDF format\n *             required:\n *               - file\n *     responses:\n *       200:\n *         description: File imported and data extracted successfully\n *         content:\n *           application/json:\n *             schema:\n *               type: object\n *               properties:\n *                 success:\n *                   type: boolean\n *                 data:\n *                   type: object\n *                   properties:\n *                     import:\n *                       type: object\n *                       properties:\n *                         filename:\n *                           type: string\n *                         originalName:\n *                           type: string\n *                         mimetype:\n *                           type: string\n *                         size:\n *                           type: integer\n *                         processingErrors:\n *                           type: array\n *                           items:\n *                             type: string\n *                         extractedFieldsCount:\n *                           type: integer\n *                     extractedData:\n *                       type: object\n *                       description: Extracted PDS data structure\n *                     validation:\n *                       type: object\n *                       nullable: true\n *                       properties:\n *                         isValid:\n *                           type: boolean\n *                         errorCount:\n *                           type: integer\n *                         warningCount:\n *                           type: integer\n *                         errors:\n *                           type: array\n *                           items:\n *                             type: object\n *                         warnings:\n *                           type: array\n *                           items:\n *                             type: object\n *                     recommendations:\n *                       type: object\n *                       properties:\n *                         needsManualReview:\n *                           type: boolean\n *                         hasValidationErrors:\n *                           type: boolean\n *                         suggestedActions:\n *                           type: array\n *                           items:\n *                             type: string\n *                     processedAt:\n *                       type: string\n *                       format: date-time\n *       400:\n *         description: Invalid file or no file uploaded\n *         content:\n *           application/json:\n *             schema:\n *               type: object\n *               properties:\n *                 error:\n *                   type: object\n *                   properties:\n *                     code:\n *                       type: string\n *                     message:\n *                       type: string\n *       413:\n *         description: File size too large\n *       500:\n *         description: File processing error\n */\nrouter.post('/pds', upload.single('file'), ImportController.importPDSFile);\n\n/**\n * @swagger\n * /import/formats:\n *   get:\n *     summary: Get supported file formats and requirements\n *     tags: [Import]\n *     responses:\n *       200:\n *         description: List of supported formats and their requirements\n *         content:\n *           application/json:\n *             schema:\n *               type: object\n *               properties:\n *                 success:\n *                   type: boolean\n *                 data:\n *                   type: object\n *                   properties:\n *                     supportedFormats:\n *                       type: array\n *                       items:\n *                         type: object\n *                         properties:\n *                           format:\n *                             type: string\n *                           mimetype:\n *                             type: string\n *                           extension:\n *                             type: string\n *                           description:\n *                             type: string\n *                           requirements:\n *                             type: array\n *                             items:\n *                               type: string\n *                     limitations:\n *                       type: object\n *                       properties:\n *                         maxFileSize:\n *                           type: string\n *                         textExtractionOnly:\n *                           type: string\n *                         accuracy:\n *                           type: string\n *                         manualReview:\n *                           type: string\n *                     bestPractices:\n *                       type: array\n *                       items:\n *                         type: string\n */\nrouter.get('/formats', ImportController.getSupportedFormats);\n\n/**\n * @swagger\n * /import/validate:\n *   post:\n *     summary: Validate uploaded file without processing\n *     tags: [Import]\n *     requestBody:\n *       required: true\n *       content:\n *         multipart/form-data:\n *           schema:\n *             type: object\n *             properties:\n *               file:\n *                 type: string\n *                 format: binary\n *                 description: File to validate\n *             required:\n *               - file\n *     responses:\n *       200:\n *         description: File validation results\n *         content:\n *           application/json:\n *             schema:\n *               type: object\n *               properties:\n *                 success:\n *                   type: boolean\n *                 data:\n *                   type: object\n *                   properties:\n *                     filename:\n *                       type: string\n *                     isValid:\n *                       type: boolean\n *                     validations:\n *                       type: object\n *                       properties:\n *                         fileType:\n *                           type: object\n *                           properties:\n *                             valid:\n *                               type: boolean\n *                             detected:\n *                               type: string\n *                             message:\n *                               type: string\n *                         fileSize:\n *                           type: object\n *                           properties:\n *                             valid:\n *                               type: boolean\n *                             size:\n *                               type: integer\n *                             sizeFormatted:\n *                               type: string\n *                             maxSize:\n *                               type: string\n *                             message:\n *                               type: string\n *                         fileExtension:\n *                           type: object\n *                           properties:\n *                             valid:\n *                               type: boolean\n *                             extension:\n *                               type: string\n *                             message:\n *                               type: string\n *                     recommendations:\n *                       type: array\n *                       items:\n *                         type: string\n *                     validatedAt:\n *                       type: string\n *                       format: date-time\n *       400:\n *         description: No file uploaded\n */\nrouter.post('/validate', upload.single('file'), ImportController.validateUploadedFile);\n\nexport default router;